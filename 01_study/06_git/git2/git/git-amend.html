<strong>되돌리기</strong>
일을 하다보면 모든 단계에서 어떤 것은 되돌리고(Undo) 싶을 때가 있다.
이번에는 우리가 한 일을 되돌리는 방법을 살펴본다.
한 번 되돌리면 복구할 수 없기에 주의해야 한다.
Git을 사용하면 우리가 저지른 실수는 대부분 복구할 수 있지만 되돌린 것은 복구할 수 없다.

종종 완료한 커밋을 수정해야 할 때가 있다.
너무 일찍 커밋했거나 어떤 파일을 빼먹었을 때 그리고 커밋 메시지를 잘못 적었을 때 한다.
다시 커밋하고 싶으면 파일 수정 작업을 하고 Staging Area에 추가한 다음 --amend 옵션을 사용하여 커밋을 재작성 할 수 있다.

    <strong>$ git commit --amend</strong>

이 명령은 Staging Area를 사용하여 커밋한다.
만약 마지막으로 커밋하고 나서 수정한 것이 없다면(커밋하자마자 바로 이 명령을 실행하는 경우) 조금 전에 한 커밋과 모든 것이 같다.
이때는 커밋 메시지만 수정한다.

편집기가 실행되면 이전 커밋 메시지가 자동으로 포함된다.
메시지를 수정하지 않고 그대로 커밋해도 기존의 커밋을 덮어쓴다.

커밋을 했는데 Stage 하는 것을 깜빡하고 빠트린 파일이 있으면 아래와 같이 고칠 수 있다.

    <strong>
    $ git commit -m 'initial commit'
    $ git add forgotten_file
    $ git commit --amend
    </strong>

여기서 실행한 명령어 3개는 모두 커밋 한 개로 기록된다.
두 번째 커밋은 첫 번째 커밋을 덮어쓴다.

<strong>NOTE</strong>

    이렇게 --amend 옵션으로 커밋을 고치는 작업은, 추가로 작업한 일이 작다고 하더라도
    이전의 커밋을 완전히 새로 고쳐서 새 커밋으로 변경하는 것을 의미한다.
    이전의 커밋은 일어나지 않은 일이 되는 것이고 당연히 히스토리에도 남지 않는다.

    --amend 옵션으로 커밋을 고치는 작업이 주는 장점은 마지막 커밋 작업에서 아주 살짝 뭔가 빠뜨린 것을 넣거나 변경하는 것을
    새 커밋으로 분리하지 않고 하나의 커밋에서 처리하는 것이다.
    "앗차, 빠진 파일 넣었음", "이전 커밋에서 오타 살짝 고침" 등의 커밋을 만들지 않겠다는 말이다.