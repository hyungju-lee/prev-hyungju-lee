<strong>브랜치란 무엇인가</strong>

Git이 브랜치를 다루는 과정을 이해하려면 우선 Git이 데이터를 어떻게 저장하는지 알아야 한다.

Git은 데이터를 Change Set이나 변경사항(Diff)으로 기록하지 않고,
일련의 스냅샷으로 기록한다는 것을 시작하기에서 보여줬다.

커밋하면 Git은 현 Staging Area에 있는 데이터의 스냅샷에 대한 포인터,
저자나 커밋 메시지 같은 메타 데이터,
이전 커밋에 대한 포인터 등을 포함하는 커밋 개체(커밋 Object)를 저장한다.
이전 커밋 포인터가 있어서 현재 커밋이 무엇을 기준으로 바뀌었는지를 알 수 있다.
최초 커밋을 제외한 나머지 커밋은 이전 커밋 포인터가 적어도 하나씩 있고 브랜치를 합친 Merge 커밋 같은 경우에는
이전 커밋 포인터가 여러 개 있다.

파일이 3개 있는 디렉토리가 하나 있고 이 파일을 Staging Area에 저장하고 커밋하는 예제를 살펴보자.
파일을 Stage 하면 Git 저장소에 파일을 저장하고(Git은 이것을 Blob이라고 부른다.)
Staging Area에 해당 파일의 체크섬을 저장한다. (사작하기에서 살펴본 SHA-1을 사용한다.)

    $ git add README test.rb LICENSE
    $ git commit -m 'The initial commit of my project'

git commit 으로 커밋하면 먼저 루트 디렉토리와 각 하위 디렉토리의 트리 개체를 체크섬과 함께 저장소에 저장한다.
그다음에 커밋 개체를 만들고 메타데이터와 루트 디렉토리 트리 개체를 가리키는 포인터 정보를 커밋 개체에 넣어 저장한다.
그래서 필요하면 언제든지 스냅샷을 다시 만들 수 있다.

이 작업을 마치고 나면 Git 저장소에는 다섯 개의 데이터 개체가 생긴다.
각 파일에 대한 Blob 세 개,
파일과 디렉토리 구조가 들어 있는 트리 개체 하나,
메타데이터와 루트 트리를 가리키는 포인터가 담긴 커밋 개체 하나이다.

<img src="img/git-branch.jpg" alt="">

다시 파일을 수정하고 커밋하면 이전 커밋이 무엇인지도 저장한다.

<img src="img/git-branch2.jpg" alt="">

Git의 브랜치는 커밋 사이를 가볍게 이동할 수 있는 어떤 포인터 같은 것이다.
기본적으로 Git은 master 브랜치를 만든다.
처음 커밋하면 이 master 브랜치가 생성된 커밋을 가리킨다.
이후 커밋을 만들면 master 브랜치는 자동으로 가장 마지막 커밋을 가리킨다.

<strong>Note</strong>
Git 버전 관리 시스템에서 "master" 브랜치는 특별하지 않다.
다른 브랜치와 다른 것이 없다.
다만 모든 저장소에서 "master" 브랜치가 존재하는 이유는 git init 명령으로 초기화할 때 자동으로 만들어진 이 브랜치를
애써 다른 이름으로 변경하지 않기 때문이다.