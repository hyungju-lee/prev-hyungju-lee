<!DOCTYPE html>
<html lang="ko-KR">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width">
    <title>node</title>
    <link rel="stylesheet" href="css/touchnswipe.min.css">
    <link rel="stylesheet" href="../../../css/font.css">
    <link rel="stylesheet" href="../../../css/prism.css">
    <link rel="stylesheet" href="../../../css/child_style2.css">
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="js/hammer.min.js"></script>
    <script src="js/TweenMax.min.js"></script>
    <script src="js/jquery.touchnswipe.min.js"></script>
</head>
<body>
<div id="wrap">
    <div class="explain">
        <h1 class="tit">사용자 정의 모듈, NPM에 배포하기</h1>
        <dl>
            <dt class="d_tit">사용자 정의 모듈, NPM에 배포하기</dt>
            <dd class="d_txt">
                제작한 combineJS 모듈을 어디서나 사용할 수 있도록 NPM에 공개하여 배포할 수 있습니다. <br>
                모듈을 배포하기 전 [modules] 디렉터리 안에 [combineJS] 디렉터리를 생성합니다. <br>
                combineJs.js 파일의 이름을 index.js로 바꾼 후 새로 생성한 [combineJS] 디렉터리로 옮깁니다.
                <span class="img_wrap"><img src="img/node44.jpg" alt=""></span>
                파일 이름을 index.js로 변경한 이유는 다음처럼 모듈을 호출할 때 파일 확장자를 생략하고 디렉터리 이름만으로 불러올 수 있게 하려는 것입니다. <br>
                이렇게 하면 디렉터리 안에 있는 index.js 파일을 찾아 실행합니다.
                <span class="img_wrap"><img src="img/node45.jpg" alt=""></span>
                다음 단계로 Git Bash에서 [modules/combineJS] 디렉터리로 이동(Change Directory)합니다. <br>
                그리고 NPM 명령어인 <strong>npm init</strong>를 입력하여 실행합니다. <br>
                초기화(init) 명령어는 사용자에게 질문하여 대답을 입력받는 형식으로 package.json 파일을 생성합니다. <br>
                <strong>package.json은 배포(publish)할 때 반드시 필요한 파일입니다.</strong> <br>
                package.json 파일을 직접 생성할 수도 있지만, 처음 사용할 때는 초기화 명령어로 생성하는 것이 더 편리합니다.
                <div class="pinch">
                    <div class="slider" data-elem="touchnswipe" data-options="appendControls:false; appendControlHolder:false">
                        <div class="slideHolder" data-elem="slides" data-options="loop:false; slideOptions:{ fullscreenAdjustHeight:0; doubleTapZoom:3; maxZoom:10; }">
                            <div data-elem="slide">
                                <img data-src="img/node46.jpg" data-elem="bg"/>
                            </div>
                        </div>
                        <div data-elem="fullscreenToggle" data-options="onCss:{className:fullscreenToggle on}; offCss:{className:fullscreenToggle off}" class="fullscreenToggle" style="background-color:rgba(255,255,255, 0.6); border:1px solid #999; left:auto; right:10px; top:10px"></div>
                    </div>
                </div>
                package.json 파일을 열면, 질문에 답변한 내용이 문서에 포함되어 있습니다. <br>
                (문서 내용 중 필요 없는 부분은 삭제하여 정리할 수 있습니다.)
                <span class="img_wrap"><img src="img/node47.jpg" alt=""></span>
                위에 작성한 combineJS 모듈은 minify 모듈에 의존(Dependencies)합니다. <br>
                그러므로 모듈을 배포할 때 이를 package.json에 명시해야 합니다. <br>
                Git Bash에서 <strong>npm install --save-dev minify</strong> 명령어를 입력하여 실행하면 [combineJS] 디렉터리 안에 [node_modules] 디렉터리가 추가됩니다.
                <br>
                그 안에는 [minify] 모듈 디렉터리가 들어 있습니다. <br>
                그리고 자동으로 package.json 파일도 업데이트되어 의존 모듈임을 표시합니다.
                <div class="pinch">
                    <div class="slider" data-elem="touchnswipe" data-options="appendControls:false; appendControlHolder:false">
                        <div class="slideHolder" data-elem="slides" data-options="loop:false; slideOptions:{ fullscreenAdjustHeight:0; doubleTapZoom:3; maxZoom:10; }">
                            <div data-elem="slide" data-options="thumb:img/node48.jpg">
                                <img data-src="img/node48.jpg" data-elem="bg"/>
                            </div>
                            <div data-elem="slide" data-options="thumb:img/node49.jpg">
                                <img data-src="img/node49.jpg" data-elem="bg"/>
                            </div>
                        </div>
                        <div data-elem="thumbs" class="thumbs" style="bottom:0px"></div>
                        <div data-elem="fullscreenToggle" data-options="onCss:{className:fullscreenToggle on}; offCss:{className:fullscreenToggle off}" class="fullscreenToggle" style="background-color:rgba(255,255,255, 0.6); border:1px solid #999; left:auto; right:10px; top:10px"></div>
                    </div>
                </div>
                package.json 파일을 생성한 후에는 NPM에 배포할 사용자 계정을 추가해야 합니다. <br>
                <strong>npm adduser</strong> 명령어를 입력하여 실행하면, 질문 형식으로 사용자 이름(Username), 비밀번호(Password), 메일(Email) 정보를 물어봅니다.
                <br>
                질문에 대답하면 사용자 계정이 등록됩니다.
                <span class="img_wrap"><img src="img/node50.jpg" alt=""></span>
                이제 NPM에 배포하는 <strong>npm publish</strong> 명령어를 실행합니다. <br>
                오류 메시지가 출력됩니다. <br>
                어떤 문제가 있는 걸까요? 오류 메시지를 확인해보니 '등록할 모듈 패키지 이름은 반드시 소문자로만 작성해야 한다(forbidden New Package must have all-lowercase names)고 합니다.
                <span class="img_wrap"><img src="img/node51.jpg" alt=""></span>
                <strong>그런데 이것도 책과 다르게 나오네.. 버전업이 되어서 그런가..흠, 아 그런게 아니라 등록한 메일로온 verify를 안해서 그런거였음.</strong> <br>
                여튼 모듈 패키지 이름에 대문자가 있어 발생한 오류입니다. <br>
                package.json 파일에서 name 값의 대문자 JS를 소문자 js로 수정하여 저장합니다. <br>
                다시 Git Bash에서 <strong>npm publish</strong> 명령어를 실행하면 오류 업시 정상적으로 모듈이 NPM에 등록됩니다.
                <div class="pinch">
                    <div class="slider" data-elem="touchnswipe" data-options="appendControls:false; appendControlHolder:false">
                        <div class="slideHolder" data-elem="slides" data-options="loop:false; slideOptions:{ fullscreenAdjustHeight:0; doubleTapZoom:3; maxZoom:10; }">
                            <div data-elem="slide" data-options="thumb:img/node52.jpg">
                                <img data-src="img/node52.jpg" data-elem="bg"/>
                            </div>
                            <div data-elem="slide" data-options="thumb:img/node53.jpg">
                                <img data-src="img/node53.jpg" data-elem="bg"/>
                            </div>
                            <div data-elem="slide" data-options="thumb:img/node54.jpg">
                                <img data-src="img/node54.jpg" data-elem="bg"/>
                            </div>
                        </div>
                        <div data-elem="thumbs" class="thumbs" style="bottom:0px"></div>
                        <div data-elem="fullscreenToggle" data-options="onCss:{className:fullscreenToggle on}; offCss:{className:fullscreenToggle off}" class="fullscreenToggle" style="background-color:rgba(255,255,255, 0.6); border:1px solid #999; left:auto; right:10px; top:10px"></div>
                    </div>
                </div>
                배포된 모듈 패키지는 NPM에서 모듈 이름으로 검색하거나 <a href="https://npm.com/package/">https://npm.com/package/{모듈이름}</a>으로 접속해서 확인할 수 있습니다.
                <br>
                (배포한 후 즉시 확인하면 검색이 되지 않을 수 있습니다. 이때는 잠시 후에 다시 시도합니다.)
            </dd>
        </dl>
    </div>
</div>
<script src="../../../js/prism.js"></script>
</body>
</html>